{% extends 'im/base_two_cols.html'%}

{% block extra_messages %}
    {% if not messages %}
        {% for msg_type, msg in LOGIN_MESSAGES.items %}
            <li class="{{ msg_type }}">{{ msg|safe }}</li>
        {% endfor %}
    {% endif %}
{% endblock %}

{% block signup_class %}hidden{% endblock %}
{% block page.title %}
Login
{% endblock %}

{% block body %}
<div class="section">
    <img class="pic" src="{{ IM_STATIC_URL }}images/pictures/login_pic.png" />
</div>
{% comment %}{% include "im/services_description.html" %}{% endcomment %}
{% endblock body %}
    
{% block body.right %}
<div class="section">
     {% if "local" in im_modules %}
        <form action="{% url astakos.im.target.local.login %}" method="post"
            class="login innerlabels">{% csrf_token %}
            <h2 class="formheader"><span>LOGIN</span></h2>
            {% with login_form as form %}
            {% include "im/form_render.html" %}
            {% endwith %}
            <input type="hidden" name="next" value="{{ next }}">
            <div class="form-row submit">
                <input type="submit" class="submit altcol" value="SUBMIT" />
                <a class="extra-link" href="{% url django.contrib.auth.views.password_reset %}">Forgot your password?</a>
            </div>
        </form>
      {% endif %}

          <div class="extralogin">
              {% for o in im_modules %}
              <div>
            {% if o != 'local' %}
            LOGIN using
            <a href="/im/login/{{ o }}?{% ifnotequal next "" %}&next={{ next|urlencode }}{% endifnotequal %}{% ifnotequal code ""%}{% if next != "" %}&{% else %}?{% endif %}code={{ code }}{% endifnotequal %}"
                alt="{{ o|title }}">{{ o }}</a>
            {% endif %}
            </div>
            {% endfor %}
        </div>
        {% block body.signup %}
        {% for o in im_modules %}
            {% if o != 'local' %}
            <br />
            {% endif %}
        {% endfor %}
        <div class="bottom">
            {% block body.login.signup %}
                new to okeanos ? <a href="{% url astakos.im.views.signup %}{% ifnotequal code "" %}?code={{ code|urlencode }}{% endifnotequal %}">CREATE ACCOUNT</a>
            {% endblock %}
            </div>
        </div>
        {% endblock %}
    </div>
{% endblock %}
