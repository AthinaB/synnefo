{% load i18n %}
<!DOCTYPE html>
<head>
	<title>{{ project }}</title>
	<!-- include the Tools -->
	<script src="static/jquery.tools.min.js"></script>
    <script src="static/jquery.cookie.js"></script>
    <script src="static/jQueryRotate.js"></script>
    <script src="static/jquery.dataTables.min.js"></script>

	<link rel="stylesheet" type="text/css" href="static/main.css"/>	

</head>
<body>
    <div id="wrapper">
        <div id='user'>
            <a href="#">{% trans "username" %}</a> &nbsp;|&nbsp; <a href="#">{% trans "settings" %}</a>
            {% get_available_languages as LANGUAGES %}
            {% for lang in LANGUAGES %}
                &nbsp;|&nbsp;
                <a {% if current_lang == lang.0 %}class="current_lang" {% else %}  href="/lang/?l={{lang.0}}" {% endif %}>{{lang.0}}</a> 
            {% endfor %}
        </div>
        <div id='header'>
            <a href="/" class="logo">
                <img src="static/nefo.png" alt="+nefo"/>
            </a>
            <div class='fatborder'></div>
        </div>
        <!-- tabs -->
        <ul class="css-tabs">
	        <li><a href="machines" title="{% trans "manage your virtual machines" %}" class="primary" id="machines">
                {% trans "machines" %}</a></li>
	        <li><a href="disks" title="{% trans "manage your storage volumes" %}" class="primary" id="disks">
                {% trans "disks" %}</a></li>
	        <li><a href="images" title="{% trans "manage boot images" %}" class="primary" id="images">
                {% trans "images" %}</a></li>
	        <li><a href="networks" title="{% trans "configure networking" %}" class="primary" id="networks">
                {% trans "networks" %}</a></li>
            <li><a href="files" title="{% trans "your files" %}" class="secondary" id="files">
                {% trans "files" %}</a></li>
	        <li><a href="desktops" title="{% trans "your desktops" %}" class="secondary" id="desktops">
                {% trans "desktops" %}</a></li>
	        <li><a href="apps" title="{% trans "your apps" %}" class="secondary" id="apps">
                {% trans "apps" %}</a></li>
        </ul>
        <div class="more-tabs"><img src="static/arrow.png" id="arrow"></img></div>
        <div class="css-panes">
	        <div id="machines-pane" class="pane" style="display:block">{% include "machines.html" %}</div>
	        <div id="disks-pane" class="pane"></div>
	        <div id="images-pane" class="pane"></div>
	        <div id="networks-pane" class="pane"></div>
            <div id="files-pane" class="pane"></div>
	        <div id="desktops-pane" class="pane"></div>
	        <div id="apps-pane" class="pane"></div>
        </div>
    </div>
    <!-- activate tabs with JavaScript -->
    <script>
		$(function() {
		    $('ul.css-tabs li').hover(function(){
			    $(this).find('a:not(.current)').animate({top:'0px'},{queue:false,duration:150});
            }, function(){
                $('ul.css-tabs li a:not(.current)').animate({top:'9px'},{queue:false,duration:150});
		    });
		});
		
        $(function() {
	        $("ul.css-tabs").tabs("div.css-panes div.pane", {	
		        onBeforeClick: function(event, i) {
                    $('ul.css-tabs li a').animate({top:'9px'},{queue:false,duration:150});
			        // get the pane to be opened
			        var pane = this.getPanes().eq(i);
                    pane.text('');
			        // load it with a page specified in the tab's href attribute
			        pane.load(this.getTabs().eq(i).attr("href"));

		        }
	        });
        });

        // toggle main menu
        $("#arrow").click(function(event){
        	toggleMenu();
        }); 
                
		function toggleMenu() {
        	var primary = $("ul.css-tabs li a.primary");
            var secondary = $("ul.css-tabs li a.secondary");
            var all = $("ul.css-tabs li a");			
			var toggled = $('ul.css-tabs li a.current').hasClass('secondary');
			
			// if anything is still moving, do nothing
        	if ($(":animated").length) {
        		return;
        	} 
        	
        	// nothing is current to begin with
            $('ul.css-tabs li a.current').removeClass('current');
			
			// move stuff around
            all.animate({top:'30px'}, {complete: function() { 
                $(this).hide();
                if (toggled) {
	                primary.show();
	                primary.animate({top:'9px'}, {complete: function() {
	                	$('ul.css-tabs li a.primary#machines').addClass('current');
	                	$('a#machines').click();                           	
	                }});
                } else {
                	secondary.show();
                	secondary.animate({top:'9px'}, {complete: function() {
	                	$('ul.css-tabs li a.secondary#files').addClass('current');
	                	$('a#files').click();                           			                	
                	}});
                }            	                          
            }});
            
            // rotate arrow icon
            if (toggled) {
            	$("#arrow").rotate({animateAngle: (0), bind:[{"click":function(){toggleMenu()}}]});
            	$("#arrow").rotateAnimation(0);            	
            } else {
            	$("#arrow").rotate({animateAngle: (-180), bind:[{"click":function(){toggleMenu()}}]});
            	$("#arrow").rotateAnimation(-180);
            }            
		}  
    </script>
</body>
</html>

