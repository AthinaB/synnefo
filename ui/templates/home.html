{% load i18n %}
<!DOCTYPE html>
<head>
	<title>{{ project }}</title>
	<!-- include the Tools -->
	<script src="static/jquery.tools.min.js"></script>
    <script src="static/jquery.cookie.js"></script>
    <script src="static/jQueryRotate.js"></script>
    <script src="static/jquery.dataTables.min.js"></script>
    <script>
        var TIMEOUT = {{timeout}};
        /* These have to be here for the translations to work */
        // ajax error checking  
        function ajax_error(jqXHR) {
            // prepare the error message
            $("#error-success h3").text('{% trans "Error!" %}');
            // check the error code
            switch (jqXHR.status) {
                case 400: // YY error/message
                    $("#error-success p").text('{% trans "A Bad Request has been made." %}');
                    break;
                case 404: // YY error/message
                    $("#error-success p").text('{% trans "Your request has failed." %}');
                    break;
                case 501: // XX error/message
                    $("#error-success p").text('{% trans "There has been an Internal Error. Our administrators have been notified." %}');
                    break;
                case 503: // XX error/message
                    $("#error-success p").text('{% trans "This service is unavailable right now, please try again later." %}');
                    break;
                default: // XXYY error/message
                    $("#error-success p").text('{% trans "An error has happened. Our administrators have been notified." %}');
            }         
            // bring up error notification
            var triggers = $("a#notification").overlay({
                // some mask tweaks suitable for modal dialogs
                mask: {
                    color: '#ebecff',
                    opacity: '0.9'
                },
                top: 'center',
                closeOnClick: false,
                oneInstance: false,
                load: false,
                onClose: function(){
                    choose_view();
                }
            });
            $("a#notification").data('overlay').load();
            return false;
        }
        
        // ajax success checking
        function ajax_success() {          
            // prepare the error message
            $("#error-success h3").text('{% trans "Success!" %}');
            $("#error-success p").text('{% trans "Your request has been succefully executed." %}');             
            // bring up success notification
            var triggers = $("a#notification").overlay({
                // some mask tweaks suitable for modal dialogs
                mask: {
                    color: '#ebecff',
                    opacity: '0.9'
                },
                top: 'center',
                closeOnClick: false,
                oneInstance: false,
                load: false,
                onClose: function(){
                    choose_view();
                }
            });
            $("a#notification").data('overlay').load();
            return false;
        }
    
    </script>
    <script src="static/synnefo.js"></script>

	<link rel="stylesheet" type="text/css" href="static/main.css"/>	

</head>
<body>
    <div id="wrapper">
        <div id='user'>
            <a href="#">{% trans "username" %}</a> &nbsp;|&nbsp; <a href="#">{% trans "settings" %}</a>
            {% get_available_languages as LANGUAGES %}
            {% for lang in LANGUAGES %}
                &nbsp;|&nbsp;
                <a {% if current_lang == lang.0 %}class="current_lang" {% else %}  href="/lang/?l={{lang.0}}" {% endif %}>{{lang.0}}</a> 
            {% endfor %}
        </div>
        <div id='header'>
            <a href="/" class="logo">
                <img src="static/nefo.png" alt="+nefo"/>
            </a>
            <div class='fatborder'></div>
        </div>
        <!-- tabs -->
        <ul class="css-tabs">
	        <li><a href="machines" title="{% trans "manage your virtual machines" %}" class="primary" id="machines">
                {% trans "machines" %}</a></li>
	        <li><a href="disks" title="{% trans "manage your storage volumes" %}" class="primary" id="disks">
                {% trans "disks" %}</a></li>
	        <li><a href="images" title="{% trans "manage boot images" %}" class="primary" id="images">
                {% trans "images" %}</a></li>
	        <li><a href="networks" title="{% trans "configure networking" %}" class="primary" id="networks">
                {% trans "networks" %}</a></li>
            <li><a href="files" title="{% trans "your files" %}" class="secondary" id="files">
                {% trans "files" %}</a></li>
	        <li><a href="desktops" title="{% trans "your desktops" %}" class="secondary" id="desktops">
                {% trans "desktops" %}</a></li>
	        <li><a href="apps" title="{% trans "your apps" %}" class="secondary" id="apps">
                {% trans "apps" %}</a></li>
        </ul>
        <div class="more-tabs"><img src="static/arrow.png" id="arrow"></img></div>
        <div class="css-panes">
	        <div id="machines-pane" class="pane" style="display:block">{% include "machines.html" %}</div>
	        <div id="disks-pane" class="pane"></div>
	        <div id="images-pane" class="pane"></div>
	        <div id="networks-pane" class="pane"></div>
            <div id="files-pane" class="pane"></div>
	        <div id="desktops-pane" class="pane"></div>
	        <div id="apps-pane" class="pane"></div>
        </div>
    </div>
    <!-- activate tabs with JavaScript -->
    <script>
		$(function() {
		    $('ul.css-tabs li').hover(function(){
			    $(this).find('a:not(.current)').animate({top:'0px'},{queue:false,duration:150});
            }, function(){
                $('ul.css-tabs li a:not(.current)').animate({top:'9px'},{queue:false,duration:150});
		    });
		});
		
        $(function() {
	        $("ul.css-tabs").tabs("div.css-panes div.pane", {	
		        onBeforeClick: function(event, i) {
                    $('ul.css-tabs li a').animate({top:'9px'},{queue:false,duration:150});
			        // get the pane to be opened
			        var pane = this.getPanes().eq(i);
                    pane.text('');
			        // load it with a page specified in the tab's href attribute
			        pane.load(this.getTabs().eq(i).attr("href"),function(){if (!i) {choose_view()}});
		        }
	        });
        });

        // toggle main menu
        $("#arrow").click(function(event){
        	toggleMenu();
        });    
        
    </script>
    
</body>
</html>

