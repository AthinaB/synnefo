#!/usr/bin/make -f

%:
	dh $@ --with python2

package=snf-ganeti-tools

override_dh_auto_install:
	dh_auto_install

	mkdir -p debian/$(package)/usr/sbin
	-mv \
	  debian/$(package)/usr/bin/snf-ganeti-eventd \
	  debian/$(package)/usr/sbin/snf-ganeti-eventd
	-mv \
	  debian/$(package)/usr/bin/snf-ganeti-hook \
	  debian/$(package)/usr/sbin/snf-ganeti-hook
	-mv \
	  debian/$(package)/usr/bin/snf-progress-monitor \
	  debian/$(package)/usr/sbin/snf-progress-monitor
	rmdir debian/$(package)/usr/bin
	# this package provides the synnefo namespace __init__.py
	for py in $(shell pyversions -vr debian/control); do \
		cp synnefo/__init__.py debian/$(package)/usr/lib/python$$py/*-packages/synnefo/; \
	done
